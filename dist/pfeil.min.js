(function(){function l(){return function f(d,e,a){function c(b,g){if(!e[b]){if(!d[b]){var h="function"==typeof require&&require;if(!g&&h)return h(b,!0);if(k)return k(b,!0);h=Error("Cannot find module '"+b+"'");throw h.code="MODULE_NOT_FOUND",h;}h=e[b]={exports:{}};d[b][0].call(h.exports,function(a){var k=d[b][1][a];return c(k?k:a)},h,h.exports,f,d,e,a)}return e[b].exports}for(var k="function"==typeof require&&require,b=0;b<a.length;b++)c(a[b]);return c}({1:[function(f,d){var e=f("./lib/promise");d.exports=function(){return(new e).g}},
{"./lib/promise":6}],2:[function(f,d){d.exports=function(e){var a=[];a.c=!1;a.reject=function(c){var a;a=e.state;var b=c.l;"function"===typeof b?(a=b.call(void 0,a.value),c.a.state.resolve(a)):c.a.state.reject(a.value)};a.resolve=function(c){var a;a=e.state;var b=c.k;"function"===typeof b?(a=b.call(void 0,a.value),c.a.state.resolve(a)):c.a.state.resolve(a.value)};a.evaluate=function(a){var d=e.state;try{"rejected"===d.state?this.reject(a):this.resolve(a)}catch(b){a.a.state.reject(b)}};a.flush=function(){var a=
[];for(this.c=!0;this.length;){for(;this.length;)a[a.length]=this.pop();for(;a.length;)this.evaluate(a.pop())}this.c=!1};a.push=function(){var a=e.state;Array.prototype.push.apply(this,Array.prototype.slice.call(arguments));"pending"!==a.state&&(this.c||this.flush())};return a}},{}],3:[function(f,d){var e=f("./thenable"),a=f("./next-tick");d.exports=function(c){var d=!1;c.e=new e(c);return{promise:c.e,resolve:function(b){d||(d=!0,a(function(){c.state.resolve(b)}))},reject:function(b){d||(d=!0,a(function(){c.state.reject(b)}))}}}},
{"./next-tick":4,"./thenable":8}],4:[function(f,d){d.exports=f("asap")},{asap:9}],5:[function(f,d){var e=f("./thenable");d.exports=function(a,c){function d(c){g||(g=!0,a.state.reject(c))}function b(c){g||(g=!0,a.state.resolve(c))}var f,g=!1;if(a.e===c)a.state.reject(new TypeError);else if(c instanceof e)c.then(b,d);else if("object"===typeof c&&null!==c||"function"===typeof c)try{f=c.then,"function"===typeof f?f.call(c,b,d):a.state.f(c)}catch(h){g||(g=!0,a.state.reject(h))}else a.state.f(c)}},{"./thenable":8}],
6:[function(f,d){var e=f("./deferred"),a=f("./state"),c=f("./chain");d.exports=function(){this.g=new e(this);this.state=new a(this);this.b=new c(this)}},{"./chain":2,"./deferred":3,"./state":7}],7:[function(f,d){var e=f("./proc");d.exports=function(a){return{a:a,value:void 0,state:"pending",resolve:function(a){e(this.a,a)},f:function(a){this.state="fulfilled";this.value=a;this.a.b.flush()},reject:function(a){this.state="rejected";this.value=a;this.a.b.flush()}}}},{"./proc":5}],8:[function(f,d){d.exports=
function(d){var a=d.__proto__.constructor;this.then=function(c,f){var b=new a;d.b.push({k:c,l:f,a:b});return b.e}}},{}],9:[function(f,d){function e(){for(;a.next;){a=a.next;var c=a.d;a.d=void 0;var b=a.domain;b&&(a.domain=void 0,b.h());try{c()}catch(d){if(n)throw b&&b.i(),setTimeout(e,0),b&&b.h(),d;setTimeout(function(){throw d;},0)}b&&b.i()}k=!1}var a={d:void 0,next:null},c=a,k=!1,b=void 0,n=!1;if("undefined"!==typeof process&&process.j)n=!0,b=function(){process.j(e)};else if("function"===typeof setImmediate)b=
"undefined"!==typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!==typeof MessageChannel){var g=new MessageChannel;g.port1.onmessage=e;b=function(){g.port2.postMessage(0)}}else b=function(){setTimeout(e,0)};d.exports=function(a){c=c.next={d:a,domain:n&&process.domain,next:null};k||(k=!0,b())}},{}]},{},[1])(1)}
if("object"==typeof exports&&"undefined"!=typeof module)module.exports=l();else if("function"==typeof define&&define.m)define([],l);else{var m;"undefined"!=typeof window?m=window:"undefined"!=typeof global?m=global:"undefined"!=typeof self&&(m=self);(m.pfeil||(m.pfeil={})).defer=l()}!0;}());
